<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FB Cookie Checker + File Upload</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>body{background:#f1f2f6;padding:20px;} .card{margin-top:20px;}</style>
</head>
<body>
<div class="container">
    <div class="card">
        <div class="card-header text-center bg-primary text-white">
            <h3>FB Cookie Checker Pro (With File Upload)</h3>
        </div>
        <div class="card-body">
            <!-- সিঙ্গেল কুকি -->
            <div class="mb-3">
                <label class="form-label">পেস্ট কুকি</label>
                <textarea id="cookie" class="form-control" rows="5" placeholder="এখানে কুকি পেস্ট করো..."></textarea>
                <button onclick="checkSingle()" class="btn btn-success mt-2">চেক করো</button>
            </div>

            <hr>

            <!-- ফাইল আপলোড -->
            <div class="mb-3">
                <label class="form-label">অথবা .txt ফাইল আপলোড করো (প্রতি লাইনে ১টা কুকি)</label>
                <input type="file" id="fileupload" accept=".txt" class="form-control">
                <button onclick="checkBulk()" class="btn btn-warning mt-2">বাল্ক চেক করো</button>
            </div>

            <div id="result"></div>
        </div>
    </div>
</div>

<script>
function checkSingle() {
    let cookie = document.getElementById("cookie").value.trim();
    if (!cookie) return alert("কুকি দাও!");
    document.getElementById("result").innerHTML = "<div class='alert alert-info'>চেক করা হচ্ছে...</div>";
    fetch("check.php", {
        method: "POST",
        headers: {"Content-Type": "application/x-www-form-urlencoded"},
        body: "cookie=" + encodeURIComponent(cookie)
    })
    .then(r => r.json())
    .then(data => {
        document.getElementById("result").innerHTML = `<pre class="alert alert-\( {data.status=='live'?'success':'danger'}"> \){JSON.stringify(data, null, 2)}</pre>`;
    });
}

function checkBulk() {
    let file = document.getElementById("fileupload").files[0];
    if (!file) return alert("ফাইল সিলেক্ট করো!");
    document.getElementById("result").innerHTML = "<div class='alert alert-info'>ফাইল প্রসেসিং হচ্ছে...</div>";
    let reader = new FileReader();
    reader.onload = function(e) {
        let cookies = e.target.result.split(/\n/).filter(c => c.trim());
        let html = "<h5>বাল্ক রেজাল্ট:</h5><ol>";
        let count = 0;
        cookies.forEach(cookie => {
            if (cookie.trim()) {
                fetch("check.php", {
                    method: "POST",
                    headers: {"Content-Type": "application/x-www-form-urlencoded"},
                    body: "cookie=" + encodeURIComponent(cookie.trim())
                })
                .then(r => r.json())
                .then(data => {
                    count++;
                    let color = data.status === "live" ? "text-success" : "text-danger";
                    html += `<li class="\( {color}"><b> \){data.name || 'Unknown'} (\( {data.uid || 'N/A'})</b> → \){data.status.toUpperCase()} | BM: ${data.bm_count || 0}</li>`;
                    if (count === cookies.length) {
                        document.getElementById("result").innerHTML = html + "</ol>";
                    }
                });
            }
        });
    };
    reader.readAsText(file);
}
</script>
</body>
</html>
